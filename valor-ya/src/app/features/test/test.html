<div class="test-container">
  <h1>TESTS - Endpoints de Catastro Bogotá</h1>

  <!-- Mapa de Leaflet -->
  <div class="map-section">
    <h2>Mapa Interactivo</h2>
    <app-map></app-map>
  </div>

  <!-- Mock Data -->
  <div class="mock-section">
    <h2>Búsqueda con Datos Prueba</h2>
    <button class="btn-mock" (click)="buscarMockCompleto()" [disabled]="loadingMock()">
      {{ loadingMock() ? 'Cargando...' : 'Buscar Info Test' }}
    </button>

    @if (mockResponse()) {
    <div class="info-section">
      <h3>Información del Predio</h3>
      <div class="info-grid">
        <div class="info-item">
          <label>Municipio:</label>
          <span>{{ mockResponse()!.data?.infoAdicional?.municipio || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <label>Localidad:</label>
          <span>{{ mockResponse()!.data?.infoAdicional?.localidad || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <label>Barrio:</label>
          <span>{{ mockResponse()!.data?.infoAdicional?.barrio || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <label>Dirección:</label>
          <span>{{ mockResponse()!.data?.infoAdicional?.direccion || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <label>Tipo de Predio:</label>
          <span>{{ mockResponse()!.data?.infoAdicional?.tipoPredio || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <label>Estrato:</label>
          <span>{{ mockResponse()!.data?.infoAdicional?.estrato || 'N/A' }}</span>
        </div>
        <div class="info-item">
          <label>Área construida privada:</label>
          <span>{{ mockResponse()!.data?.infoAdicional?.areaConstruidaPrivada || 'N/A' }} m²</span>
        </div>
      </div>
    </div>
    }
  </div>

  <!-- Form 1: Búsqueda por Dirección -->
  <div class="form-section">
    <h2>Form 1: Búsqueda por Dirección</h2>
    <form (ngSubmit)="buscarPorDireccion()">
      <div class="form-group">
        <label for="direccion">Dirección:</label>
        <input
          type="text"
          id="direccion"
          name="direccion"
          [(ngModel)]="direccion"
          placeholder="Ej: KR 119B 73B 15"
        />
      </div>
      <button type="submit" [disabled]="loadingForm1()">
        {{ loadingForm1() ? 'Buscando...' : 'Buscar por Dirección' }}
      </button>
    </form>

    @if (responseForm1()) {
    <div class="response-section">
      <h3>Respuesta Form 1:</h3>
      <pre>{{ responseForm1() | json }}</pre>
    </div>
    } @if (errorForm1()) {
    <div class="error-section">
      <p class="error">{{ errorForm1() }}</p>
    </div>
    }
  </div>

  <!-- Form 2: Búsqueda por CHIP -->
  <div class="form-section">
    <h2>Form 2: Búsqueda por CHIP</h2>
    <form (ngSubmit)="buscarPorChip()">
      <div class="form-group">
        <label for="chip">CHIP:</label>
        <input type="text" id="chip" name="chip" [(ngModel)]="chip" placeholder="Ej: AAA0228WRAW" />
      </div>
      <button type="submit" [disabled]="loadingForm2()">
        {{ loadingForm2() ? 'Buscando...' : 'Buscar por CHIP' }}
      </button>
    </form>

    @if (responseForm2()) {
    <div class="response-section">
      <h3>Respuesta Form 2:</h3>
      <pre>{{ responseForm2() | json }}</pre>
    </div>
    } @if (errorForm2()) {
    <div class="error-section">
      <p class="error">{{ errorForm2() }}</p>
    </div>
    }
  </div>
</div>
