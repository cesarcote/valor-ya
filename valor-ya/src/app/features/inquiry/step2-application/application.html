<app-stepper></app-stepper>

<div class="solicitud-container">
  <h2>Consulta tu predio</h2>
  <p class="subtitle">Selecciona el método de búsqueda y completa la información</p>

  <!-- TABS para seleccionar tipo de búsqueda -->
  @if (!mostrarResultado) {
  <div class="tabs-govco-container">
    <nav>
      <div class="nav nav-tabs" role="tablist">
        <button
          class="nav-link"
          [class.active]="tipoBusquedaActual === TipoBusqueda.CHIP"
          (click)="onTabChangeSimple(TipoBusqueda.CHIP)"
        >
          CHIP
        </button>
        <button
          class="nav-link"
          [class.active]="tipoBusquedaActual === TipoBusqueda.DIRECCION"
          (click)="onTabChangeSimple(TipoBusqueda.DIRECCION)"
        >
          Dirección Catastral
        </button>
        <button
          class="nav-link"
          [class.active]="tipoBusquedaActual === TipoBusqueda.FMI"
          (click)="onTabChangeSimple(TipoBusqueda.FMI)"
        >
          Folio Matrícula Inmobiliaria
        </button>
      </div>
    </nav>
  </div>

  <!-- FORMULARIOS -->
  <div class="form-container">
    @if (tipoBusquedaActual === TipoBusqueda.CHIP) {
    <app-form-chip></app-form-chip>
    } @if (tipoBusquedaActual === TipoBusqueda.DIRECCION) {
    <app-form-address></app-form-address>
    } @if (tipoBusquedaActual === TipoBusqueda.FMI) {
    <app-form-fmi></app-form-fmi>
    }
  </div>
  }

  <!-- RESULTADO (se muestra después de consultar) -->
  @if (mostrarResultado && predioData) {
  <div class="result-container">
    <div class="result-header">
      <h3>{{ predioData.mensaje }}</h3>
      <button class="btn-secondary" (click)="stateService.setMostrarResultado(false)">
        Realizar nueva búsqueda
      </button>
    </div>

    <div class="result-info">
      <h4>Datos del Predio</h4>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Dirección:</span>
          <span class="value">{{ predioData.direccion }}</span>
        </div>
        <div class="info-item">
          <span class="label">Municipio:</span>
          <span class="value">{{ predioData.municipio }}</span>
        </div>
        <div class="info-item">
          <span class="label">Localidad:</span>
          <span class="value">{{ predioData.localidad }}</span>
        </div>
      </div>
    </div>

    <div class="action-buttons">
      <button type="button" class="btn-secondary" (click)="onVolver()">Volver al inicio</button>
      <button type="button" class="btn-primary" (click)="onContinuar()">
        Continuar con el proceso
      </button>
    </div>
  </div>
  }
</div>
