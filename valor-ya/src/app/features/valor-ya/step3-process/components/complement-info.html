<app-stepper></app-stepper>

<div class="step-container">
  <div class="step-header">
    <h2>Completa la información de tu predio</h2>
    <p class="subtitle">Ayúdanos a complementar la información de tu predio</p>
    @if (stateService.tipoUnidadSeleccionada()) {
    <div class="info-badge">
      <span class="badge-label">Tipo de unidad seleccionado:</span>
      <strong>{{ stateService.tipoUnidadSeleccionada()!.descripcionUnidad }}</strong>
    </div>
    }
  </div>

  @if (errorMessage()) {
  <div class="error-alert">
    <p>{{ errorMessage() }}</p>
  </div>
  }

  <form [formGroup]="complementForm" class="complement-form">
    <!-- Tipo de predio -->
    <div class="form-section">
      <h3>Tipo de predio</h3>

      <app-select
        dataId="tipoPredio"
        label="Tipo de predio"
        [formCtr]="tipoPredioControl"
        [options]="tiposPredio()"
        placeholder="Selecciona una opción"
      ></app-select>

      @if (tipoPredioControl.value === 'otro') {
      <app-input
        type="text"
        id="otroTipoPredio"
        label="Otro tipo de predio"
        [formCtr]="otroTipoPredioControl"
        placeholder="Especifique el tipo de predio"
      ></app-input>
      }
    </div>

    <!-- Características del predio -->
    <div class="form-section">
      <h3>Características del predio</h3>
      <div class="form-row">
        <app-input
          type="number"
          id="numeroHabitaciones"
          label="Número de habitaciones"
          [formCtr]="numeroHabitacionesControl"
          [min]="0"
        ></app-input>

        <app-input
          type="number"
          id="numeroBanos"
          label="Número de baños"
          [formCtr]="numeroBanosControl"
          [min]="0"
        ></app-input>
      </div>

      <div class="form-row">
        <app-input
          type="number"
          id="areaConstruida"
          label="Área construida en m²"
          [formCtr]="areaConstruidaControl"
          [min]="1"
        ></app-input>

        <app-input
          type="text"
          id="edad"
          label="Edad (ej: 2021 - 2027)"
          [formCtr]="edadControl"
        ></app-input>
      </div>

      <div class="form-row">
        <app-input
          type="number"
          id="estrato"
          label="Estrato"
          [formCtr]="estratoControl"
          [min]="1"
          [max]="6"
        ></app-input>
      </div>
    </div>

    <!-- Equipamientos y garajes -->
    <div class="form-section">
      <h3>Equipamientos y garajes</h3>
      <div class="form-row">
        <app-input
          type="number"
          id="numeroAscensores"
          label="Número de ascensores"
          [formCtr]="numeroAscensoresControl"
          [min]="0"
        ></app-input>

        <app-input
          type="number"
          id="numeroParqueaderos"
          label="Número de parqueaderos"
          [formCtr]="numeroParqueaderosControl"
          [min]="0"
        ></app-input>
      </div>

      <div class="form-row">
        <app-input
          type="number"
          id="numeroDepositos"
          label="Número de depósitos"
          [formCtr]="numeroDepositosControl"
          [min]="0"
        ></app-input>
      </div>
    </div>

    <div class="action-buttons">
      <app-button text="Volver" variant="outline" type="button" (clicked)="onVolver()">
      </app-button>
      <app-button text="Consultar" variant="fill" type="button" (clicked)="onConsultarMCM()">
      </app-button>
    </div>
  </form>
</div>
