<app-valorya-description></app-valorya-description>
<app-stepper></app-stepper>

<div class="step-container">
  <!-- Header de éxito -->
  <div class="success-header">
    <div class="success-icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path
          fill-rule="evenodd"
          d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
          clip-rule="evenodd"
        />
      </svg>
    </div>
    <h2 class="result-title">¡Avalúo Procesado Exitosamente!</h2>
    <p class="result-subtitle">Complete los datos de facturación para continuar</p>
  </div>

  <!-- Mensaje de error -->
  @if (errorMessage()) {
  <div class="error-message">
    <div class="error-icon">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
        <path
          fill-rule="evenodd"
          d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z"
          clip-rule="evenodd"
        />
      </svg>
    </div>
    <p>{{ errorMessage() }}</p>
  </div>
  }

  <!-- Sección: Datos de Facturación -->
  <div class="billing-section">
    <h3>Datos de Facturación</h3>
    <p class="section-subtitle">Complete la siguiente información para continuar con el pago</p>

    <form [formGroup]="facturacionForm" class="billing-form">
      <div class="form-row">
        <app-select
          dataId="tipoDocumento"
          label="Tipo de Documento"
          [formCtr]="tipoDocumentoControl"
          [options]="tiposDocumento"
          placeholder="Seleccione tipo de documento"
        ></app-select>

        <app-input
          type="text"
          id="numeroDocumento"
          label="Número de Documento"
          [formCtr]="numeroDocumentoControl"
          placeholder="Ej: 1234567890"
        ></app-input>
      </div>

      <div class="form-row">
        <app-input
          type="text"
          id="nombreCompleto"
          label="Nombre Completo / Razón Social "
          [formCtr]="nombreCompletoControl"
          placeholder="Ej: Juan Pérez"
        ></app-input>
      </div>

      <div class="form-row">
        <app-input
          type="text"
          id="direccion"
          label="Dirección"
          [formCtr]="direccionControl"
          placeholder="Ej: CL 123 # 45-67"
        ></app-input>

        <app-input
          type="text"
          id="ciudad"
          label="Ciudad"
          [formCtr]="ciudadControl"
          placeholder="Ej: Bogotá"
        ></app-input>
      </div>

      <div class="form-row">
        <app-input
          type="tel"
          id="telefono"
          label="Teléfono"
          [formCtr]="telefonoControl"
          placeholder="Ej: 3001234567"
        ></app-input>

        <app-input
          type="email"
          id="email"
          label="Email de Entrega "
          [formCtr]="emailControl"
          placeholder="Ej: correo@ejemplo.com"
        ></app-input>
      </div>

      <div class="form-actions">
        <app-button
          text="Nueva Consulta"
          variant="secondary"
          type="button"
          (clicked)="onNuevaConsulta()"
        >
        </app-button>
        <app-button
          [text]="isSubmitting() ? 'Procesando Pago...' : 'Proceder al Pago'"
          variant="primary"
          type="button"
          [disabled]="isSubmitting()"
          (clicked)="onSubmitFacturacion()"
        >
        </app-button>
      </div>
    </form>
  </div>
</div>
